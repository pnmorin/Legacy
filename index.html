<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <center>
  <title>Gutter Cleaning Estimator</title></center>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!-- Materialize CSS -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">
<style>
  .input-field select {
    width: 250px !important; /* Limit dropdown width */
  }
  label {
    font-size: 18px !important; /* Increase label font size */
  }
  .custom-btn {
    background-color: #4180A4 !important;
  }
  /* Change the dropdown text color */
  .dropdown-content li > span,
  .dropdown-content li > a {
    color: #4180A4 !important;
  }
  .input-field {
  margin-bottom: 40px;
}
.error-message {
  color: red;
  font-size: 18px;
  font-weight: bold;
}
</style>

</head>
<body>

  <div class="container">
    <h1>Gutter Cleaning Estimator</h1>

    <div class="input-field">
      <select id="gutterLength">
        <option value="0" disabled selected>Select</option>
        <option value="1">Less than 75</option>
        <option value="2">75 - 100</option>
        <option value="3">100 - 125</option>
        <option value="4">125 - 150</option>
        <option value="5">150 - 200</option>
      </select>
      <label>How many feet of Gutter on your home?</label>
      <span class="error-message" id="gutterLengthError"></span>
    </div>

    <div class="input-field">
      <select id="stories">
        <option value="0" disabled selected>Select</option>
        <option value="1">1 Story</option>
        <option value="2">2 Stories</option>
        <option value="3">3 Stories</option>
      </select>
      <label>Number of stories the home is?</label>
       <span class="error-message" id="storiesError"></span>
    </div>

    <div class="input-field">
      <select id="lastCleaned">
        <option value="0" disabled selected>Select</option>
        <option value="1">Less than 6 months ago</option>
        <option value="2">6 - 12 months ago</option>
        <option value="3">More than a year ago</option>
      </select>
      <label>When were the gutters last cleaned?</label>
      <span class="error-message" id="lastCleanedError"></span>
    </div>

    <div class="input-field">
      <select id="gutterGuards">
        <option value="0" disabled selected>Select</option>
        <option value="1">Yes</option>
        <option value="2">No</option>
      </select>
      <label>Does the home have Gutter Guards?</label>
      <span class="error-message" id="gutterGuardsError"></span>
    </div>

        <button class="btn waves-effect waves-light" style="background-color: #4180A4;" onclick="return calculateEstimate()">Get Estimate</button>

    <h2>Estimated Cost: <span id="estimate"></span></h2>

    <button class="btn waves-effect waves-light" style="background-color: #4180A4;" onclick="location.href='mailto:contact@yourcompany.com'">Contact Us</button>

<!-- Share button -->
<button id="shareButton" class="btn waves-effect waves-light" style="background-color: #4180A4;" onclick="document.getElementById('shareModal').style.display='block'">Share</button>

<!-- Modal-like HTML at the end of the body -->
<div id="shareModal" style="display:none; position:fixed; top:0; left:0; right:0; bottom:0; background-color:rgba(0,0,0,0.5); z-index:1000;">
  <div style="margin: 15% auto; padding: 20px; background-color:#fff; width: 300px; text-align:center;">
    <h4>Share Estimate</h4>
    <button onclick="shareQuote('email')">Share via Email</button>
    <button onclick="shareQuote('sms')">Share via SMS</button>
    <button onclick="document.getElementById('shareModal').style.display='none'">Cancel</button>
  </div>
</div>


  </div>

  <!-- Materialize JavaScript -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
  <script>
    // Initialize Materialize select elements
    document.addEventListener('DOMContentLoaded', function() {
      var elems = document.querySelectorAll('select');
      var instances = M.FormSelect.init(elems);
      document.getElementById('shareButton').disabled = true;  // Add this line
    });

function calculateEstimate() {
  // Fetch values
  const gutterLength = document.getElementById('gutterLength').value;
  const stories = document.getElementById('stories').value;
  const lastCleaned = document.getElementById('lastCleaned').value;
  const gutterGuards = document.getElementById('gutterGuards').value;

  // Reset error messages
  document.getElementById('gutterLengthError').innerText = '';
  document.getElementById('storiesError').innerText = '';
  document.getElementById('lastCleanedError').innerText = '';
  document.getElementById('gutterGuardsError').innerText = '';

  // Check for empty selections and show error messages
  if (!gutterLength || gutterLength === '0') {
    document.getElementById('gutterLengthError').innerText = 'Please select a gutter length.';
    return false;
  }
  if (!stories || stories === '0') {
    document.getElementById('storiesError').innerText = 'Please select the number of stories.';
    return false;
  }
  if (!lastCleaned || lastCleaned === '0') {
    document.getElementById('lastCleanedError').innerText = 'Please select the last cleaned timing.';
    return false;
  }
  if (!gutterGuards || gutterGuards === '0') {
    document.getElementById('gutterGuardsError').innerText = 'Please select if you have gutter guards or not.';
    return false;
  }

  // Rest of your calculation code
  let cost = 0;

  if (gutterLength === '1') cost += 200;
  else if (gutterLength === '2') cost += 225;
  else if (gutterLength === '3') cost += 250;
  else if (gutterLength === '4') cost += 275;
  else if (gutterLength === '5') cost += 300;

  // Additional costs based on stories
  if (stories === '1') cost += 0;  // No additional cost for 2 stories
  else if (stories === '2')  cost *= 1.10; // Adding 10%
  else if (stories === '3') cost *= 1.15;  // Adding 15%

  if (lastCleaned === '1') cost += 0;
  else if (lastCleaned === '2') cost *= 1.10; // Adding 10%
  else if (lastCleaned === '3') cost *= 1.20; // Adding 20%

  if (gutterGuards === '1') cost *= 1.15;  // Adding 15%
  else if (gutterGuards === '2') cost += 0;

  const estimate = Math.round(cost);

  console.log('Estimate:', estimate);  // Debugging line
  
// Enable or disable the "Share" button based on the estimate
    if (estimate > 0) {
       console.log('Enabling Share button');  // Debugging line
      document.getElementById('shareButton').disabled = false;
    } else {
      console.log('Disabling Share button');  // Debugging line
      document.getElementById('shareButton').disabled = true;
    }

  document.getElementById('estimate').innerText = '$' + Math.round(cost);
}

      
function shareQuote() {
  // Get the estimated cost
  const estimate = document.getElementById('estimate').innerText;

  // Get selected text for each question
  const gutterLengthText = document.querySelector("#gutterLength option:checked").text;
  const storiesText = document.querySelector("#stories option:checked").text;
  const lastCleanedText = document.querySelector("#lastCleaned option:checked").text;
  const gutterGuardsText = document.querySelector("#gutterGuards option:checked").text;

  const additionalContent = "This is an estimate and not a quote. Legacy Gutter Solutions may need to adjust the price depending upon assessment of the job. No work will be performed until the customer agrees upon the final price.";
  
  const subject = 'Your Gutter Cleaning Estimate';
  const body = `Here is your estimated cost for gutter cleaning: ${estimate}
  - How many feet of Gutter on your home?: ${gutterLengthText}
  - Number of stories the home is?: ${storiesText}
  - When were the gutters last cleaned?: ${lastCleanedText}
  - Does the home have Gutter Guards?: ${gutterGuardsText}
  
  ${additionalContent}`;

  const emailBody = encodeURIComponent(body);
  const emailSubject = encodeURIComponent(subject);
  
  const userAgent = navigator.userAgent || navigator.vendor;

  if (/android/i.test(userAgent)) {
    // Trigger SMS for Android
    window.location.href = `sms:?body=${emailBody}`;
  } else if (/iPad|iPhone|iPod/.test(userAgent)) {
    // Trigger SMS for iOS
    window.location.href = `sms:&body=${emailBody}`;
  } else {
    // Trigger email for other devices
    window.location.href = `mailto:?subject=${emailSubject}&body=${emailBody}`;
  }
}



  </script>

</body>
</html>